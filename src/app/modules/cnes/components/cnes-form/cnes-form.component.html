@if(loading) {
<app-cnes-form-skeleton />
} @else {
<div class="form-container">
  <p-card class="form-card" [header]="this.code ? 'Detalhes' : 'Cadastrar'">
    <form [formGroup]="form" class="form">
      <div style="display: flex; gap: 8rem">
        <div class="input-container">
          <label for="codigo_cnes">Código CNES</label>
          <p-inputnumber
            formControlName="codigo_cnes"
            placeholder="Código CNES"
            class="flex-auto"
            [useGrouping]="false"
            maxlength="9"
          />
        </div>
        <div class="input-container">
          <label for="numero_cnpj">CNPJ</label>
          <p-inputnumber
            formControlName="numero_cnpj"
            placeholder="CNPJ"
            class="flex-auto"
            autocomplete="off"
            [useGrouping]="false"
            maxlength="14"
          />
        </div>
        <div class="input-container">
          <label for="codigo_estabelecimento_saude"
            >Código de Saúde do Estabelecimento</label
          >
          <p-inputnumber
            formControlName="codigo_estabelecimento_saude"
            placeholder="Código de Saúde"
            class="flex-auto"
            autocomplete="off"
            [useGrouping]="false"
            maxlength="14"
          />
        </div>
      </div>
      <div class="input-container">
        <label for="nome_razao_social">Razão Social</label>
        <input
          class="input"
          pInputText
          formControlName="nome_razao_social"
          placeholder="Razão Social"
          class="flex-auto"
          autocomplete="off"
          maxlength="100"
        />
      </div>
      <div class="input-container">
        <label for="nome_fantasia">Nome Fantasia</label>
        <input
          class="input"
          pInputText
          formControlName="nome_fantasia"
          placeholder="Nome Fantasia"
          class="flex-auto"
          autocomplete="off"
          maxlength="100"
        />
      </div>
      <div style="display: flex; gap: 2rem">
        <div class="input-container" style="width: 100%">
          <label for="endereco_email_estabelecimento">Email</label>
          <input
            class="input"
            pInputText
            formControlName="endereco_email_estabelecimento"
            placeholder="Email"
            class="flex-auto"
            maxlength="50"
            autocomplete="off"
          />
        </div>
        <div class="input-container">
          <label for="numero_telefone_estabelecimento">Telefone</label>
          <input
            class="input"
            pInputText
            formControlName="numero_telefone_estabelecimento"
            placeholder="Telefone"
            class="flex-auto"
            autocomplete="off"
            maxlength="13"
          />
        </div>
      </div>
      <div class="input-container">
        <label for="descricao_turno_atendimento">Descrição do Turno</label>
        <input
          class="input"
          pInputText
          formControlName="descricao_turno_atendimento"
          placeholder="Turno de atendimento"
          class="flex-auto"
          autocomplete="off"
          maxlength="50"
        />
      </div>
      <div style="display: flex; gap: 2rem">
        <div class="input-container">
          <label for="codigo_cep_estabelecimento">CEP</label>
          <input
            class="input"
            pInputText
            formControlName="codigo_cep_estabelecimento"
            placeholder="CEP"
            class="flex-auto"
            autocomplete="off"
            maxlength="8"
            (input)="checkLength()"
          />
        </div>
        <div class="input-container" style="width: 100%">
          <label for="endereco_estabelecimento">Endereço</label>
          <input
            class="input"
            pInputText
            formControlName="endereco_estabelecimento"
            placeholder="Endereço"
            class="flex-auto"
            autocomplete="off"
          />
        </div>
      </div>
      <div style="display: flex; gap: 2rem">
        <div class="input-container">
          <label for="numero_estabelecimento">Numero</label>
          <input
            class="input"
            pInputText
            formControlName="numero_estabelecimento"
            placeholder="Numero"
            class="flex-auto"
            autocomplete="off"
          />
        </div>
        <div class="input-container" style="width: 100%">
          <label for="bairro_estabelecimento">Bairro</label>
          <input
            class="input"
            pInputText
            formControlName="bairro_estabelecimento"
            placeholder="Bairro"
            class="flex-auto"
            autocomplete="off"
          />
        </div>
      </div>
      <div class="buttons">
        <p-button
          class="button"
          label="Voltar"
          severity="info"
          (onClick)="back()"
        />

        @if(!this.code) {
        <p-button label="Enviar" (onClick)="onSubmit()" [disabled]="this.form.invalid"/>
        }
      </div>
    </form>
    @if(!!this.code) {
    <app-cnes-location
      [name]="establishment?.nome_fantasia!"
      [latitude]="establishment?.latitude_estabelecimento_decimo_grau!"
      [longitude]="establishment?.longitude_estabelecimento_decimo_grau!"
    />
    }
  </p-card>
</div>
}
